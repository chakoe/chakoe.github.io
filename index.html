<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ¶åœ©æ—¥å†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            margin: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .title {
            font-size: 28px;
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 10px;
        }
        
        .divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, #2196F3, transparent);
            margin: 20px 0;
        }
        
        .date-section {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .current-date {
            font-size: 18px;
            color: #666;
            margin-bottom: 15px;
        }
        
        .market-status {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .status-text {
            font-size: 22px;
            font-weight: bold;
        }
        
        .market-day {
            color: #4CAF50;
        }
        
        .normal-day {
            color: #FF5722;
        }
        
        .market-icon {
            font-size: 24px;
            color: #4CAF50;
        }
        
        .next-market {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .days-left {
            font-size: 18px;
            color: #2196F3;
            margin-bottom: 8px;
        }
        
        .next-date {
            font-size: 16px;
            color: #666;
        }
        
        .history-section {
            margin-top: 20px;
        }
        
        .history-title {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }
        
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 10px;
        }
        
        .record-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 6px;
            background: #f8f9fa;
        }
        
        .record-item:last-child {
            margin-bottom: 0;
        }
        
        .market-record {
            background: #e8f5e8;
            border-left: 4px solid #4CAF50;
        }
        
        .normal-record {
            background: #f5f5f5;
            border-left: 4px solid #ccc;
        }
        
        .record-date {
            font-weight: 500;
        }
        
        .market-date {
            color: #4CAF50;
        }
        
        .normal-date {
            color: #666;
        }
        
        .record-type {
            font-size: 14px;
        }
        
        .market-type {
            color: #4CAF50;
        }
        
        .normal-type {
            color: #999;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">èµ¶åœ©æ—¥å†</div>
        </div>
        
        <div class="divider"></div>
        
        <div class="date-section">
            <div class="current-date" id="currentDate">å½“å‰æ—¥æœŸ: åŠ è½½ä¸­...</div>
            
            <div class="market-status">
                <div class="status-text" id="marketStatus">åŠ è½½ä¸­...</div>
                <div class="market-icon" id="marketIcon" style="display: none;">ğŸª</div>
            </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="next-market">
            <div class="days-left" id="daysLeft">è·ç¦»ä¸‹ä¸€ä¸ªåœ©æ—¥è¿˜æœ‰: è®¡ç®—ä¸­...</div>
            <div class="next-date" id="nextDate">ä¸‹ä¸€ä¸ªåœ©æ—¥: è®¡ç®—ä¸­...</div>
        </div>
        
        <div class="divider"></div>
        
        <div class="history-section">
            <div class="history-title">å†å²åœ©æ—¥è®°å½•</div>
            <div class="history-list" id="historyList">
                <!-- å†å²è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // åœ©æ—¥è®°å½•æ¥å£
        class MarketDayRecord {
            constructor(date, isMarketDay, period, note) {
                this.date = date;
                this.isMarketDay = isMarketDay;
                this.period = period;
                this.note = note;
            }
        }

        // è·å–å½“å‰æ—¥æœŸ
        function getCurrentDate() {
            const now = new Date();
            return `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}`;
        }

        // ä¸‰ä¸ªåœ©çš„åç§°æ•°ç»„
        const marketNames = ['å¤ªå®ˆ', 'æ–°æ¡¥', 'èŠ¦åœ©'];
        
        // æ ¹æ®æ‚¨æŒ‡å®šçš„åŸºå‡†æ—¥æœŸè®¡ç®—åœ©æ—¥
        function calculateMarketDays() {
            const now = new Date();
            // ä¿®æ­£åŸºå‡†æ—¥è®¾ç½®ï¼Œç¡®ä¿æ—¶åŒºä¸€è‡´
            const baseDate = new Date('2025-11-12T00:00:00'); // å¤ªå®ˆåŸºå‡†æ—¥
            
            // è®¡ç®—å½“å‰æ—¥æœŸä¸åŸºå‡†æ—¥æœŸçš„å¤©æ•°å·®ï¼ˆåŒ…æ‹¬å½“å¤©ï¼‰
            // ä¿®æ­£ç®—æ³•ï¼šç¡®ä¿åŸºå‡†æ—¥(2025-11-12)ä¸ºå¤ªå®ˆåœ©æ—¥
            const diffTime = now.getTime() - baseDate.getTime();
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            // æ ¹æ®å¤©æ•°å·®è®¡ç®—åœ©æ—¥åç§°ç´¢å¼•
            // åŸºå‡†æ—¥(2025-11-12)ï¼šdiffDays=0 â†’ index=0 â†’ å¤ªå®ˆ
            // 2025-11-13ï¼šdiffDays=1 â†’ index=1 â†’ æ–°æ¡¥
            // 2025-11-14ï¼šdiffDays=2 â†’ index=2 â†’ èŠ¦åœ©
            // 2025-11-15ï¼šdiffDays=3 â†’ index=0 â†’ å¤ªå®ˆ
            const marketNameIndex = diffDays % 3;
            const currentMarketName = marketNames[marketNameIndex];
            
            // æ¯å¤©éƒ½æ˜¯åœ©æ—¥
            const isMarketDay = true;
            
            // ä¸‹ä¸€ä¸ªåœ©æ—¥å°±æ˜¯æ˜å¤©
            const nextMarketDate = new Date(now);
            nextMarketDate.setDate(now.getDate() + 1);
            const nextMarketDay = `${nextMarketDate.getFullYear()}-${(nextMarketDate.getMonth() + 1).toString().padStart(2, '0')}-${nextMarketDate.getDate().toString().padStart(2, '0')}`;
            
            // ä¸‹ä¸€ä¸ªåœ©æ—¥çš„åç§°
            const nextMarketNameIndex = (marketNameIndex + 1) % 3;
            const nextMarketName = marketNames[nextMarketNameIndex];

            return {
                isMarketDay,
                daysToNextMarket: 1, // æ¯å¤©éƒ½æœ‰åœ©æ—¥
                nextMarketDay,
                currentMarketName,
                nextMarketName,
                debugInfo: `å½“å‰æ—¥æœŸ: ${now.toISOString().split('T')[0]}, å¤©æ•°å·®: ${diffDays}, ç´¢å¼•: ${marketNameIndex}`
            };
        }

        // åŠ è½½åœ©æ—¥è®°å½•
        function loadMarketDayRecords() {
            const sampleRecords = [];
            const now = new Date();
            const baseDate = new Date('2025-11-12T00:00:00'); // å¤ªå®ˆåŸºå‡†æ—¥
            
            // ç”Ÿæˆè¿‡å»30å¤©çš„ç¤ºä¾‹æ•°æ®ï¼ˆä»æ–°åˆ°æ—§æ’åºï¼‰
            for (let i = 0; i <= 30; i++) {
                const date = new Date(now);
                date.setDate(now.getDate() - i);
                
                const dateStr = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;
                
                // è®¡ç®—åŸºå‡†æ—¥æœŸä¸å½“å‰æ—¥æœŸçš„å¤©æ•°å·®ï¼ˆåŒ…æ‹¬å½“å¤©ï¼‰
                // åŸºå‡†æ—¥(2025-11-12)æ˜¯å¤ªå®ˆåœ©æ—¥
                const diffTime = date.getTime() - baseDate.getTime();
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                
                // æ ¹æ®å¤©æ•°å·®è®¡ç®—åœ©æ—¥åç§°ç´¢å¼•
                // ç¡®ä¿åŸºå‡†æ—¥(2025-11-12)å¯¹åº”å¤ªå®ˆ(ç´¢å¼•0)
                const marketNameIndex = (diffDays % 3 + 3) % 3; // å¤„ç†è´Ÿæ•°æƒ…å†µ
                const marketName = marketNames[marketNameIndex];
                
                // æ¯å¤©éƒ½æ˜¯åœ©æ—¥
                const isMarketDay = true;
                const marketNote = `${marketName}åœ©æ—¥`;

                sampleRecords.push(new MarketDayRecord(
                    dateStr,
                    isMarketDay,
                    marketNameIndex,
                    marketNote
                ));
            }
            
            return sampleRecords;
        }

        // æ›´æ–°é¡µé¢æ˜¾ç¤º
        function updateDisplay() {
            const currentDate = getCurrentDate();
            const marketData = calculateMarketDays();
            const records = loadMarketDayRecords();

            // æ›´æ–°å½“å‰æ—¥æœŸ
            document.getElementById('currentDate').textContent = `å½“å‰æ—¥æœŸ: ${currentDate}`;

            // æ›´æ–°åœ©æ—¥çŠ¶æ€
            const marketStatus = document.getElementById('marketStatus');
            const marketIcon = document.getElementById('marketIcon');
            marketStatus.textContent = `ä»Šå¤©${marketData.currentMarketName}åœ©æ—¥`;
            marketStatus.className = 'status-text market-day';
            marketIcon.style.display = 'block';
            
            // æ·»åŠ è°ƒè¯•ä¿¡æ¯åˆ°æ§åˆ¶å°
            console.log('åœ©æ—¥è®¡ç®—è°ƒè¯•ä¿¡æ¯:', marketData.debugInfo);
            console.log('åœ©æ—¥åç§°æ•°ç»„:', marketNames);
            console.log('å½“å‰åœ©æ—¥åç§°:', marketData.currentMarketName);
            
            // æ·»åŠ è°ƒè¯•ä¿¡æ¯åˆ°æ§åˆ¶å°
            console.log('åœ©æ—¥è®¡ç®—è°ƒè¯•ä¿¡æ¯:', marketData.debugInfo);
            console.log('åœ©æ—¥åç§°æ•°ç»„:', marketNames);
            console.log('å½“å‰åœ©æ—¥åç§°:', marketData.currentMarketName);

            // æ›´æ–°ä¸‹ä¸€ä¸ªåœ©æ—¥ä¿¡æ¯
            document.getElementById('daysLeft').textContent = `è·ç¦»ä¸‹ä¸€ä¸ªåœ©æ—¥è¿˜æœ‰: ${marketData.daysToNextMarket}å¤©`;
            document.getElementById('nextDate').textContent = `ä¸‹ä¸€ä¸ªåœ©æ—¥: ${marketData.nextMarketDay} (${marketData.nextMarketName})`;

            // æ›´æ–°å†å²è®°å½•
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            records.forEach(record => {
                const recordDiv = document.createElement('div');
                recordDiv.className = `record-item ${record.isMarketDay ? 'market-record' : 'normal-record'}`;
                
                recordDiv.innerHTML = `
                    <span class="record-date ${record.isMarketDay ? 'market-date' : 'normal-date'}">
                        ${record.date}
                    </span>
                    <span class="record-type ${record.isMarketDay ? 'market-type' : 'normal-type'}">
                        ${record.note}
                    </span>
                `;
                
                historyList.appendChild(recordDiv);
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
            
            // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ï¼ˆå¯é€‰ï¼‰
            setInterval(updateDisplay, 60000);
        });

        // æ·»åŠ ä¸€äº›äº¤äº’æ•ˆæœ
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('record-item')) {
                e.target.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    e.target.style.transform = 'scale(1)';
                }, 150);
            }
        });
    </script>
</body>
</html>
